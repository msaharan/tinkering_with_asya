(asyaenv) ➜  merge_actor_mesh_into_asya git:(testing-dh-asya-pr-58) ✗ kubectl logs -n ${NAMESPACE} -l asya.sh/asya=response-aggregator -c asya-runtime -f --tail=100
2025-12-14 22:00:23 - asya.runtime - INFO - Asya Actor Runtime starting with handler: handlers.response_aggregator.ResponseAggregator.process (mode: payload, validation: True)
2025-12-14 22:00:23 - asya.runtime - INFO - Loading class handler: module=handlers.response_aggregator class=ResponseAggregator method=process
2025-12-14 22:00:23 - asya.runtime - INFO - Instantiated class handler: ResponseAggregator
2025-12-14 22:00:23 - asya.runtime - INFO - Socket permissions set to 0o666
2025-12-14 22:00:23 - asya.runtime - INFO - Socket server listening on /var/run/asya/asya-runtime.sock
2025-12-14 22:00:23 - asya.runtime - INFO - Runtime ready signal created: /var/run/asya/runtime-ready
2025-12-14 22:00:24 - asya.runtime - WARNING - Client disconnected
2025-12-14 22:01:31 - asya.runtime - INFO - [DIAG] Starting handler execution, mode=payload, envelope_id=demo-flow-1
2025-12-14 22:01:31 - asya.runtime - INFO - [DIAG] Calling user_func with payload: {'customer_message': 'Where is my order 12345? It is one day late.', 'customer_email': 'user@example.com', 'sentiment': {'sentiment': {'label': 'negative', 'confidence': 1.0, 'score': -1.0, 'keywords': ['late']}, 'urgency': {'level': 'medium', 'score': 1, 'keywords': ['late']}, 'is_complaint': True, 'escalation_needed': False, 'keywords_detected': {'sentiment_keywords': ['late'], 'urgency_keywords': ['late'], 'complaint_keywords': ['order', 'late'], 'escalation_keywords': []}, 'analysis_method': 'rule_based', 'processed_at': '2025-12-14T22:01:15.626244+00:00', 'model_info': {'analyzer_type': 'rule_based', 'version': '1.0.0', 'compatible_with': 'all_platforms'}}, 'intent': {'intent': 'delivery_issue', 'entities': {'order_number': '12345'}, 'confidence': 0.65, 'analysis_method': 'rule_based', 'matched_keywords': ['late', 'where is'], 'detected_at': '2025-12-14T22:01:18.213902+00:00'}, 'context': {'customer': {'id': 'cust_001', 'name': 'John Doe', 'tier': 'premium', 'email': 'user@example.com'}, 'order': {'order_id': '12345', 'customer_id': 'cust_001', 'items': ['Wireless Headphones'], 'status': 'shipped', 'tracking_id': '1Z999AA10123456784', 'expected_delivery': '2025-10-02'}, 'orders': [{'order_id': '12345', 'customer_id': 'cust_001', 'items': ['Wireless Headphones'], 'status': 'shipped', 'tracking_id': '1Z999AA10123456784', 'expected_delivery': '2025-10-02'}], 'tracking': {'status': 'in_transit', 'location': 'Distribution Center', 'expected_delivery': '2025-10-02'}, 'source': 'mock_data', 'retrieved_at': '2025-12-14T22:01:20.799451+00:00'}, 'response': {'text': "I'm sorry you're experiencing this. I can check the latest delivery status for order #12345 and keep you updated. Current order status: shipped. Latest tracking update: in_transit. ETA: 2025-10-02. Next steps: provide tracking info, expedite delivery.", 'tone': 'empathetic', 'intent': 'delivery_issue', 'generated_at': '2025-12-14T22:01:23.355255+00:00', 'metadata': {'urgency': 'medium', 'sentiment': 'negative', 'action_items': ['provide_tracking_info', 'expedite_delivery']}}, 'action_plan': [{'action': 'provide_tracking_info', 'status': 'pending', 'detail': 'Share the most recent tracking event', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355212+00:00'}, {'action': 'expedite_delivery', 'status': 'pending', 'detail': 'Request carrier to prioritize shipment', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355231+00:00'}], 'guardrail_check': {'pass': True, 'issues': [], 'validated_at': '2025-12-14T22:01:25.907762+00:00', 'recommended_action': 'deliver'}, 'execution_result': {'status': 'completed', 'results': [{'action': 'provide_tracking_info', 'status': 'completed', 'detail': 'Share the most recent tracking event', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355212+00:00'}, {'action': 'expedite_delivery', 'status': 'completed', 'detail': 'Request carrier to prioritize shipment', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355231+00:00'}], 'executed_at': '2025-12-14T22:01:28.448548+00:00'}}
2025-12-14 22:01:31 - handlers.response_aggregator - INFO - Aggregation complete status=resolved guardrail_pass=True
2025-12-14 22:01:31 - asya.runtime - INFO - [DIAG] user_func returned: {'customer_message': 'Where is my order 12345? It is one day late.', 'customer_email': 'user@example.com', 'sentiment': {'sentiment': {'label': 'negative', 'confidence': 1.0, 'score': -1.0, 'keywords': ['late']}, 'urgency': {'level': 'medium', 'score': 1, 'keywords': ['late']}, 'is_complaint': True, 'escalation_needed': False, 'keywords_detected': {'sentiment_keywords': ['late'], 'urgency_keywords': ['late'], 'complaint_keywords': ['order', 'late'], 'escalation_keywords': []}, 'analysis_method': 'rule_based', 'processed_at': '2025-12-14T22:01:15.626244+00:00', 'model_info': {'analyzer_type': 'rule_based', 'version': '1.0.0', 'compatible_with': 'all_platforms'}}, 'intent': {'intent': 'delivery_issue', 'entities': {'order_number': '12345'}, 'confidence': 0.65, 'analysis_method': 'rule_based', 'matched_keywords': ['late', 'where is'], 'detected_at': '2025-12-14T22:01:18.213902+00:00'}, 'context': {'customer': {'id': 'cust_001', 'name': 'John Doe', 'tier': 'premium', 'email': 'user@example.com'}, 'order': {'order_id': '12345', 'customer_id': 'cust_001', 'items': ['Wireless Headphones'], 'status': 'shipped', 'tracking_id': '1Z999AA10123456784', 'expected_delivery': '2025-10-02'}, 'orders': [{'order_id': '12345', 'customer_id': 'cust_001', 'items': ['Wireless Headphones'], 'status': 'shipped', 'tracking_id': '1Z999AA10123456784', 'expected_delivery': '2025-10-02'}], 'tracking': {'status': 'in_transit', 'location': 'Distribution Center', 'expected_delivery': '2025-10-02'}, 'source': 'mock_data', 'retrieved_at': '2025-12-14T22:01:20.799451+00:00'}, 'response': {'text': "I'm sorry you're experiencing this. I can check the latest delivery status for order #12345 and keep you updated. Current order status: shipped. Latest tracking update: in_transit. ETA: 2025-10-02. Next steps: provide tracking info, expedite delivery.", 'tone': 'empathetic', 'intent': 'delivery_issue', 'generated_at': '2025-12-14T22:01:23.355255+00:00', 'metadata': {'urgency': 'medium', 'sentiment': 'negative', 'action_items': ['provide_tracking_info', 'expedite_delivery']}}, 'action_plan': [{'action': 'provide_tracking_info', 'status': 'pending', 'detail': 'Share the most recent tracking event', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355212+00:00'}, {'action': 'expedite_delivery', 'status': 'pending', 'detail': 'Request carrier to prioritize shipment', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355231+00:00'}], 'guardrail_check': {'pass': True, 'issues': [], 'validated_at': '2025-12-14T22:01:25.907762+00:00', 'recommended_action': 'deliver'}, 'execution_result': {'status': 'completed', 'results': [{'action': 'provide_tracking_info', 'status': 'completed', 'detail': 'Share the most recent tracking event', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355212+00:00'}, {'action': 'expedite_delivery', 'status': 'completed', 'detail': 'Request carrier to prioritize shipment', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355231+00:00'}], 'executed_at': '2025-12-14T22:01:28.448548+00:00'}, 'final_response': {'customer_email': 'user@example.com', 'response': "I'm sorry you're experiencing this. I can check the latest delivery status for order #12345 and keep you updated. Current order status: shipped. Latest tracking update: in_transit. ETA: 2025-10-02. Next steps: provide tracking info, expedite delivery.", 'status': 'resolved', 'intent': 'delivery_issue', 'sentiment': 'negative', 'guardrail': {'pass': True, 'issues': [], 'validated_at': '2025-12-14T22:01:25.907762+00:00', 'recommended_action': 'deliver'}, 'execution': {'status': 'completed', 'results': [{'action': 'provide_tracking_info', 'status': 'completed', 'detail': 'Share the most recent tracking event', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355212+00:00'}, {'action': 'expedite_delivery', 'status': 'completed', 'detail': 'Request carrier to prioritize shipment', 'order_id': '12345', 'created_at': '2025-12-14T22:01:23.355231+00:00'}], 'executed_at': '2025-12-14T22:01:28.448548+00:00'}, 'completed_at': '2025-12-14T22:01:31.395703+00:00'}}
2025-12-14 22:01:31 - asya.runtime - INFO - [DIAG] Handler completed successfully: returning 1 response(s)
^C%   